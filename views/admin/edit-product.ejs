<%- include('../partials/header') %>

<h2><i class="fas fa-edit"></i> تعديل المنتج: <%= product.name %></h2>
<hr>

<div class="card shadow-lg p-4">
    <form action="/admin/edit/<%= product._id %>" method="POST" enctype="multipart/form-data">
        
        <div class="text-center mb-4">
             <img src="<%= product.img %>" alt="صورة المنتج الحالية" style="max-width: 150px; max-height: 150px; object-fit: contain;" class="img-thumbnail">
             <p class="small text-muted mt-2">الصورة الحالية</p>
        </div>
        
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="name" class="form-label">اسم المنتج</label>
                <input type="text" id="name" name="name" class="form-control" value="<%= product.name %>" required>
            </div>
            <div class="col-md-6">
                <label for="category" class="form-label">التصنيف</label>
                <input type="text" id="category" name="category" class="form-control" value="<%= product.category %>" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="price" class="form-label">السعر (ريال)</label>
                <input type="number" step="0.01" min="0" id="price" name="price" class="form-control" value="<%= product.price %>" required>
            </div>
            <div class="col-md-4">
                <label for="stock" class="form-label">كمية المخزون</label>
                <input type="number" min="0" id="stock" name="stock" class="form-control" value="<%= product.stock %>" required>
            </div>
            <div class="col-md-4">
                <label for="img" class="form-label">صورة المنتج (اتركها فارغة للإبقاء على الحالية)</label>
                <input type="file" id="img" name="img" class="form-control" accept="image/*">
            </div>
        </div>

        <div class="mb-3">
            <label for="short_desc" class="form-label">وصف قصير</label>
            <input type="text" id="short_desc" name="short_desc" class="form-control" value="<%= product.short_desc %>" required>
        </div>

        <div class="mb-4">
            <label for="description" class="form-label">الوصف الكامل</label>
            <textarea id="description" name="description" class="form-control" rows="5" required><%= product.description %></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary btn-lg w-100">حفظ التعديلات</button>
    </form>
</div>

<%- include('../partials/footer') %>
