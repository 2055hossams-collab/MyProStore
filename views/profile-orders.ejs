<%- include('partials/header') %>
<h2 class="my-4">ðŸ‘¤ ØªØ§Ø±ÙŠØ® Ø·Ù„Ø¨Ø§ØªÙŠ</h2>

<div class="card shadow-sm">
    <div class="card-body">
        <% if (userOrders.length === 0) { %>
            <div class="alert alert-info text-center">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. <a href="/">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³ÙˆÙ‚</a></div>
        <% } else { %>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th># Ø§Ù„Ø·Ù„Ø¨</th>
                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% userOrders.forEach(order => { %>
                        <tr>
                            <td>#<%= order._id.toString().slice(-5) %></td>
                            <td><%= order.date.toLocaleDateString('ar-EG', { year: 'numeric', month: 'short', day: 'numeric' }) %></td>
                            <td><%= order.total.toFixed(2) %> Ø±ÙŠØ§Ù„</td>
                            <td>
                                <span class="badge bg-<%= 
                                    order.status === 'Ø¬Ø¯ÙŠØ¯' ? 'warning' : 
                                    order.status === 'ØªÙ… Ø§Ù„Ø´Ø­Ù†' ? 'primary' : 
                                    order.status === 'Ù…ÙƒØªÙ…Ù„' ? 'success' : 'secondary'
                                %>">
                                    <%= order.status %>
                                </span>
                            </td>
                            <td>
                                <ul class="list-unstyled mb-0 small">
                                    <% order.items.forEach(item => { %>
                                        <li><%= item.name %> (Ã—<%= item.qty %>)</li>
                                    <% }) %>
                                </ul>
                            </td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        <% } %>
    </div>
</div>

<%- include('partials/footer') %>
